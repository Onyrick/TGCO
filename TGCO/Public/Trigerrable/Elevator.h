// Fill out your copyright notice in the Description page of Project Settings.

#pragma once

#include "GameFramework/Actor.h"
#include "Trigerrable.h"
#include "Elevator.generated.h"

/**
 * 
 */
UCLASS()
class TGCO_API AElevator : public AActor, public ITrigerrable
{
	GENERATED_BODY()
public:
	//////////////////////////////////////////////////////////////////////////////////////////////
	//Event launch when Player trigger the component.
	// Set the Player inside the AElevator
	//////////////////////////////////////////////////////////////////////////////////////////////
	UFUNCTION(BlueprintCallable, Category = "Elevator")
		virtual void OnComponentBeginOverlap();
	
	//////////////////////////////////////////////////////////////////////////////////////////////
	//Event launch when Player trigger the component.
	// Set the Player outside the AElevator
	//////////////////////////////////////////////////////////////////////////////////////////////
	UFUNCTION(BlueprintCallable, Category = "Elevator")
		virtual void OnComponentEndOverlap();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Check if both Player are in AElevator to change Level
	//////////////////////////////////////////////////////////////////////////////////////////////
	bool CheckPlayersPresence();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Open the Doors of the elevator
	//////////////////////////////////////////////////////////////////////////////////////////////
	void OpenFrontDoors();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Close the AElevator's doors when both Player are inside
	//////////////////////////////////////////////////////////////////////////////////////////////
	void CloseFrontDoors();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Play a sound when AElevator's doors are closing/closed/opening
	//////////////////////////////////////////////////////////////////////////////////////////////
	void PlaySound();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Open the AElevator's doors when sound is finished and the next Level is load
	//////////////////////////////////////////////////////////////////////////////////////////////
	void OpenBackDoors();

	//////////////////////////////////////////////////////////////////////////////////////////////
	//Close the AElevator's doors when both Player are outside
	//////////////////////////////////////////////////////////////////////////////////////////////
	void CloseBackDoors();

protected:
	bool bIsPlayerInside;
	
};
